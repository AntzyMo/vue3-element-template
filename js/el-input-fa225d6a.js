var e=Object.defineProperty,t=Object.defineProperties,a=Object.getOwnPropertyDescriptors,o=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable,s=(t,a,o)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[a]=o,r=(e,t)=>{for(var a in t||(t={}))l.call(t,a)&&s(e,a,t[a]);if(o)for(var a of o(t))n.call(t,a)&&s(e,a,t[a]);return e};import{b as i,f as u,g as p,r as d,i as c,d as f,u as v,e as y,h as m,m as x,j as b,k as g,l as h,n as w,p as S,q as $,s as k,t as z,v as I,w as C,V as E,x as P,y as O,z as V,A as j,B as F,C as A,D as B,E as M,F as N,G as _,H as R,I as H,o as T,c as W,J as K,K as L,L as q,M as D,N as U,O as X,P as Z,Q as G,R as J,S as Q,T as Y,a as ee,U as te,W as ae,X as oe,Y as le,_ as ne,Z as se,$ as re,a0 as ie}from"./index-ea9ec8aa.js";const ue="update:modelValue",pe="change",de="input",ce=["class","style"],fe=/^on[A-Z]/;let ve;const ye=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing"];function me(e,t=1,a){var o;ve||(ve=document.createElement("textarea"),document.body.appendChild(ve));const{paddingSize:l,borderSize:n,boxSizing:s,contextStyle:r}=function(e){const t=window.getComputedStyle(e),a=t.getPropertyValue("box-sizing"),o=Number.parseFloat(t.getPropertyValue("padding-bottom"))+Number.parseFloat(t.getPropertyValue("padding-top")),l=Number.parseFloat(t.getPropertyValue("border-bottom-width"))+Number.parseFloat(t.getPropertyValue("border-top-width"));return{contextStyle:ye.map((e=>`${e}:${t.getPropertyValue(e)}`)).join(";"),paddingSize:o,borderSize:l,boxSizing:a}}(e);ve.setAttribute("style",`${r};\n  height:0 !important;\n  visibility:hidden !important;\n  overflow:hidden !important;\n  position:absolute !important;\n  z-index:-1000 !important;\n  top:0 !important;\n  right:0 !important;\n`),ve.value=e.value||e.placeholder||"";let i=ve.scrollHeight;const u={};"border-box"===s?i+=n:"content-box"===s&&(i-=l),ve.value="";const p=ve.scrollHeight-l;if(c(t)){let e=p*t;"border-box"===s&&(e=e+l+n),i=Math.max(e,i),u.minHeight=`${e}px`}if(c(a)){let e=p*a;"border-box"===s&&(e=e+l+n),i=Math.min(e,i)}return u.height=`${i}px`,null==(o=ve.parentNode)||o.removeChild(ve),ve=void 0,u}const xe=f({id:{type:String,default:void 0},size:v,disabled:Boolean,modelValue:{type:y([String,Number,Object]),default:""},type:{type:String,default:"text"},resize:{type:String,values:["none","both","horizontal","vertical"]},autosize:{type:y([Boolean,Object]),default:!1},autocomplete:{type:String,default:"off"},formatter:{type:Function},parser:{type:Function},placeholder:{type:String},form:{type:String,default:""},readonly:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},showPassword:{type:Boolean,default:!1},showWordLimit:{type:Boolean,default:!1},suffixIcon:{type:m,default:""},prefixIcon:{type:m,default:""},containerRole:{type:String,default:void 0},label:{type:String,default:void 0},tabindex:{type:[String,Number],default:0},validateEvent:{type:Boolean,default:!0},inputStyle:{type:y([Object,Array,String]),default:()=>x({})}}),be={"update:modelValue":e=>b(e),input:e=>b(e),change:e=>b(e),focus:e=>e instanceof FocusEvent,blur:e=>e instanceof FocusEvent,clear:()=>!0,mouseleave:e=>e instanceof MouseEvent,mouseenter:e=>e instanceof MouseEvent,keydown:e=>e instanceof Event,compositionstart:e=>e instanceof CompositionEvent,compositionupdate:e=>e instanceof CompositionEvent,compositionend:e=>e instanceof CompositionEvent},ge=["role"],he=["id","type","disabled","formatter","parser","readonly","autocomplete","tabindex","aria-label","placeholder"],we=["id","tabindex","disabled","readonly","autocomplete","aria-label","placeholder"];var Se;const $e=ie(ne(g((Se=r({},{name:"ElInput",inheritAttrs:!1}),t(Se,a({props:xe,emits:be,setup(e,{expose:t,emit:a}){const o=e,l={suffix:"append",prefix:"prepend"},n=p(),s=h(),c=w(),f=i((()=>{const e={};return"combobox"===o.containerRole&&(e["aria-haspopup"]=s["aria-haspopup"],e["aria-owns"]=s["aria-owns"],e["aria-expanded"]=s["aria-expanded"]),e})),v=((e={})=>{const{excludeListeners:t=!1,excludeKeys:a}=e,o=i((()=>((null==a?void 0:a.value)||[]).concat(ce))),l=p();return i(l?()=>{var e;return u(Object.entries(null==(e=l.proxy)?void 0:e.$attrs).filter((([e])=>!(o.value.includes(e)||t&&fe.test(e)))))}:()=>({}))})({excludeKeys:i((()=>Object.keys(f.value)))}),{form:y,formItem:m}=S(),{inputId:x}=$(o,{formItemContext:m}),b=k(),g=z(),ne=I("input"),ie=I("textarea"),ue=C(),pe=C(),de=d(!1),ve=d(!1),ye=d(!1),xe=d(!1),be=d(),Se=C(o.inputStyle),$e=i((()=>ue.value||pe.value)),ke=i((()=>{var e;return null!=(e=null==y?void 0:y.statusIcon)&&e})),ze=i((()=>(null==m?void 0:m.validateState)||"")),Ie=i((()=>E[ze.value])),Ce=i((()=>xe.value?P:O)),Ee=i((()=>[s.style,o.inputStyle])),Pe=i((()=>[o.inputStyle,Se.value,{resize:o.resize}])),Oe=i((()=>V(o.modelValue)?"":String(o.modelValue))),Ve=i((()=>o.clearable&&!g.value&&!o.readonly&&!!Oe.value&&(de.value||ve.value))),je=i((()=>o.showPassword&&!g.value&&!o.readonly&&!!Oe.value&&(!!Oe.value||de.value))),Fe=i((()=>o.showWordLimit&&!!v.value.maxlength&&("text"===o.type||"textarea"===o.type)&&!g.value&&!o.readonly&&!o.showPassword)),Ae=i((()=>Array.from(Oe.value).length)),Be=i((()=>!!Fe.value&&Ae.value>Number(v.value.maxlength))),Me=i((()=>!!c.suffix||!!o.suffixIcon||Ve.value||o.showPassword||Fe.value||!!ze.value&&ke.value)),[Ne,_e]=function(e){const t=d();return[function(){if(null==e.value)return;const{selectionStart:a,selectionEnd:o,value:l}=e.value;if(null==a||null==o)return;const n=l.slice(0,Math.max(0,a)),s=l.slice(Math.max(0,o));t.value={selectionStart:a,selectionEnd:o,value:l,beforeTxt:n,afterTxt:s}},function(){if(null==e.value||null==t.value)return;const{value:a}=e.value,{beforeTxt:o,afterTxt:l,selectionStart:n}=t.value;if(null==o||null==l||null==n)return;let s=a.length;if(a.endsWith(l))s=a.length-l.length;else if(a.startsWith(o))s=o.length;else{const e=o[n-1],t=a.indexOf(e,n-1);-1!==t&&(s=t+1)}e.value.setSelectionRange(s,s)}]}(ue);j(pe,(e=>{if(!Fe.value||"both"!==o.resize)return;const t=e[0],{width:a}=t.contentRect;be.value={right:`calc(100% - ${a+15+6}px)`}}));const Re=()=>{const{type:e,autosize:t}=o;if(se&&"textarea"===e)if(t){const e=re(t)?t.minRows:void 0,a=re(t)?t.maxRows:void 0;Se.value=r({},me(pe.value,e,a))}else Se.value={minHeight:me(pe.value).minHeight}},He=()=>{const e=$e.value;e&&e.value!==Oe.value&&(e.value=Oe.value)},Te=e=>{const{el:t}=n.vnode;if(!t)return;const a=Array.from(t.querySelectorAll(`.${ne.e(e)}`)).find((e=>e.parentNode===t));if(!a)return;const o=l[e];c[o]?a.style.transform=`translateX(${"suffix"===e?"-":""}${t.querySelector(`.${ne.be("group",o)}`).offsetWidth}px)`:a.removeAttribute("style")},We=()=>{Te("prefix"),Te("suffix")},Ke=async e=>{Ne();let{value:t}=e.target;o.formatter&&(t=o.parser?o.parser(t):t,t=o.formatter(t)),ye.value||t!==Oe.value&&(a("update:modelValue",t),a("input",t),await A(),He(),_e())},Le=e=>{a("change",e.target.value)},qe=e=>{a("compositionstart",e),ye.value=!0},De=e=>{var t;a("compositionupdate",e);const o=null==(t=e.target)?void 0:t.value,l=o[o.length-1]||"";ye.value=!(e=>/([(\uAC00-\uD7AF)|(\u3130-\u318F)])+/gi.test(e))(l)},Ue=e=>{a("compositionend",e),ye.value&&(ye.value=!1,Ke(e))},Xe=()=>{xe.value=!xe.value,Ze()},Ze=async()=>{var e;await A(),null==(e=$e.value)||e.focus()},Ge=e=>{de.value=!0,a("focus",e)},Je=e=>{var t;de.value=!1,a("blur",e),o.validateEvent&&(null==(t=null==m?void 0:m.validate)||t.call(m,"blur").catch((e=>B())))},Qe=e=>{ve.value=!1,a("mouseleave",e)},Ye=e=>{ve.value=!0,a("mouseenter",e)},et=e=>{a("keydown",e)},tt=()=>{a("update:modelValue",""),a("change",""),a("clear"),a("input","")};return F((()=>o.modelValue),(()=>{var e;A((()=>Re())),o.validateEvent&&(null==(e=null==m?void 0:m.validate)||e.call(m,"change").catch((e=>B())))})),F(Oe,(()=>He())),F((()=>o.type),(async()=>{await A(),He(),Re(),We()})),M((async()=>{!o.formatter&&o.parser,He(),We(),await A(),Re()})),N((async()=>{await A(),We()})),t({input:ue,textarea:pe,ref:$e,textareaStyle:Pe,autosize:_(o,"autosize"),focus:Ze,blur:()=>{var e;return null==(e=$e.value)?void 0:e.blur()},select:()=>{var e;null==(e=$e.value)||e.select()},clear:tt,resizeTextarea:Re}),(e,t)=>R((T(),W("div",Y(D(f),{class:["textarea"===e.type?D(ie).b():D(ne).b(),D(ne).m(D(b)),D(ne).is("disabled",D(g)),D(ne).is("exceed",D(Be)),{[D(ne).b("group")]:e.$slots.prepend||e.$slots.append,[D(ne).bm("group","append")]:e.$slots.append,[D(ne).bm("group","prepend")]:e.$slots.prepend,[D(ne).m("prefix")]:e.$slots.prefix||e.prefixIcon,[D(ne).m("suffix")]:e.$slots.suffix||e.suffixIcon||e.clearable||e.showPassword,[D(ne).bm("suffix","password-clear")]:D(Ve)&&D(je)},e.$attrs.class],style:D(Ee),role:e.containerRole,onMouseenter:Ye,onMouseleave:Qe}),[K(" input "),"textarea"!==e.type?(T(),W(L,{key:0},[K(" prepend slot "),e.$slots.prepend?(T(),W("div",{key:0,class:q(D(ne).be("group","prepend"))},[U(e.$slots,"prepend")],2)):K("v-if",!0),X("div",{class:q([D(ne).e("wrapper"),D(ne).is("focus",de.value)])},[K(" prefix slot "),e.$slots.prefix||e.prefixIcon?(T(),W("span",{key:0,class:q(D(ne).e("prefix"))},[X("span",{class:q(D(ne).e("prefix-inner"))},[U(e.$slots,"prefix"),e.prefixIcon?(T(),Z(D(Q),{key:0,class:q(D(ne).e("icon"))},{default:G((()=>[(T(),Z(J(e.prefixIcon)))])),_:1},8,["class"])):K("v-if",!0)],2)],2)):K("v-if",!0),X("input",Y({id:D(x),ref_key:"input",ref:ue,class:D(ne).e("inner")},D(v),{type:e.showPassword?xe.value?"text":"password":e.type,disabled:D(g),formatter:e.formatter,parser:e.parser,readonly:e.readonly,autocomplete:e.autocomplete,tabindex:e.tabindex,"aria-label":e.label,placeholder:e.placeholder,style:e.inputStyle,onCompositionstart:qe,onCompositionupdate:De,onCompositionend:Ue,onInput:Ke,onFocus:Ge,onBlur:Je,onChange:Le,onKeydown:et}),null,16,he),K(" suffix slot "),D(Me)?(T(),W("span",{key:1,class:q(D(ne).e("suffix"))},[X("span",{class:q(D(ne).e("suffix-inner"))},[D(Ve)&&D(je)&&D(Fe)?K("v-if",!0):(T(),W(L,{key:0},[U(e.$slots,"suffix"),e.suffixIcon?(T(),Z(D(Q),{key:0,class:q(D(ne).e("icon"))},{default:G((()=>[(T(),Z(J(e.suffixIcon)))])),_:1},8,["class"])):K("v-if",!0)],64)),D(Ve)?(T(),Z(D(Q),{key:1,class:q([D(ne).e("icon"),D(ne).e("clear")]),onMousedown:t[0]||(t[0]=ae((()=>{}),["prevent"])),onClick:tt},{default:G((()=>[ee(D(te))])),_:1},8,["class"])):K("v-if",!0),D(je)?(T(),Z(D(Q),{key:2,class:q([D(ne).e("icon"),D(ne).e("password")]),onClick:Xe},{default:G((()=>[(T(),Z(J(D(Ce))))])),_:1},8,["class"])):K("v-if",!0),D(Fe)?(T(),W("span",{key:3,class:q(D(ne).e("count"))},[X("span",{class:q(D(ne).e("count-inner"))},oe(D(Ae))+" / "+oe(D(v).maxlength),3)],2)):K("v-if",!0),D(ze)&&D(Ie)&&D(ke)?(T(),Z(D(Q),{key:4,class:q([D(ne).e("icon"),D(ne).e("validateIcon"),D(ne).is("loading","validating"===D(ze))])},{default:G((()=>[(T(),Z(J(D(Ie))))])),_:1},8,["class"])):K("v-if",!0)],2)],2)):K("v-if",!0)],2),K(" append slot "),e.$slots.append?(T(),W("div",{key:1,class:q(D(ne).be("group","append"))},[U(e.$slots,"append")],2)):K("v-if",!0)],64)):(T(),W(L,{key:1},[K(" textarea "),X("textarea",Y({id:D(x),ref_key:"textarea",ref:pe,class:D(ie).e("inner")},D(v),{tabindex:e.tabindex,disabled:D(g),readonly:e.readonly,autocomplete:e.autocomplete,style:D(Pe),"aria-label":e.label,placeholder:e.placeholder,onCompositionstart:qe,onCompositionupdate:De,onCompositionend:Ue,onInput:Ke,onFocus:Ge,onBlur:Je,onChange:Le,onKeydown:et}),null,16,we),D(Fe)?(T(),W("span",{key:0,style:le(be.value),class:q(D(ne).e("count"))},oe(D(Ae))+" / "+oe(D(v).maxlength),7)):K("v-if",!0)],64))],16,ge)),[[H,"hidden"!==e.type]])}})))),[["__file","/home/runner/work/element-plus/element-plus/packages/components/input/src/input.vue"]]));export{pe as C,$e as E,de as I,ue as U};
