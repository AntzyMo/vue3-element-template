var e=Object.defineProperty,a=Object.defineProperties,t=Object.getOwnPropertyDescriptors,o=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,s=(a,t,o)=>t in a?e(a,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):a[t]=o,r=(e,a)=>{for(var t in a||(a={}))n.call(a,t)&&s(e,t,a[t]);if(o)for(var t of o(a))l.call(a,t)&&s(e,t,a[t]);return e};import{v as i,al as u,am as p,u as d,an as c,m as f,ao as v,n as y,ap as m,aq as x,q as b,w as g,ar as h,Z as w,as as S,at as $,x as k,au as z,y as I,av as C,aw as E,ax as P,ay as O,az as V,V as F,z as j,Y as A,K as B,R as M,U as N,aA as _,aB as R,aC as H,E as W,F as K,a7 as T,X as q,H as D,I as L,G,a8 as U,a4 as X,a3 as Z,a6 as J,aD as Y,aE as Q,W as ee,aF as ae,aG as te,ab as oe,a5 as ne,J as le,aH as se,aI as re,ac as ie}from"./index-594d4c2b.js";const ue="update:modelValue",pe="change",de="input",ce=["class","style"],fe=/^on[A-Z]/;let ve;const ye=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing"];function me(e,a=1,t){var o;ve||(ve=document.createElement("textarea"),document.body.appendChild(ve));const{paddingSize:n,borderSize:l,boxSizing:s,contextStyle:r}=function(e){const a=window.getComputedStyle(e),t=a.getPropertyValue("box-sizing"),o=Number.parseFloat(a.getPropertyValue("padding-bottom"))+Number.parseFloat(a.getPropertyValue("padding-top")),n=Number.parseFloat(a.getPropertyValue("border-bottom-width"))+Number.parseFloat(a.getPropertyValue("border-top-width"));return{contextStyle:ye.map((e=>`${e}:${a.getPropertyValue(e)}`)).join(";"),paddingSize:o,borderSize:n,boxSizing:t}}(e);ve.setAttribute("style",`${r};\n  height:0 !important;\n  visibility:hidden !important;\n  overflow:hidden !important;\n  position:absolute !important;\n  z-index:-1000 !important;\n  top:0 !important;\n  right:0 !important;\n`),ve.value=e.value||e.placeholder||"";let i=ve.scrollHeight;const u={};"border-box"===s?i+=l:"content-box"===s&&(i-=n),ve.value="";const p=ve.scrollHeight-n;if(c(a)){let e=p*a;"border-box"===s&&(e=e+n+l),i=Math.max(e,i),u.minHeight=`${e}px`}if(c(t)){let e=p*t;"border-box"===s&&(e=e+n+l),i=Math.min(e,i)}return u.height=`${i}px`,null==(o=ve.parentNode)||o.removeChild(ve),ve=void 0,u}const xe=f({id:{type:String,default:void 0},size:v,disabled:Boolean,modelValue:{type:y([String,Number,Object]),default:""},type:{type:String,default:"text"},resize:{type:String,values:["none","both","horizontal","vertical"]},autosize:{type:y([Boolean,Object]),default:!1},autocomplete:{type:String,default:"off"},formatter:{type:Function},parser:{type:Function},placeholder:{type:String},form:{type:String,default:""},readonly:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},showPassword:{type:Boolean,default:!1},showWordLimit:{type:Boolean,default:!1},suffixIcon:{type:m,default:""},prefixIcon:{type:m,default:""},containerRole:{type:String,default:void 0},label:{type:String,default:void 0},tabindex:{type:[String,Number],default:0},validateEvent:{type:Boolean,default:!0},inputStyle:{type:y([Object,Array,String]),default:()=>x({})}}),be={"update:modelValue":e=>b(e),input:e=>b(e),change:e=>b(e),focus:e=>e instanceof FocusEvent,blur:e=>e instanceof FocusEvent,clear:()=>!0,mouseleave:e=>e instanceof MouseEvent,mouseenter:e=>e instanceof MouseEvent,keydown:e=>e instanceof Event,compositionstart:e=>e instanceof CompositionEvent,compositionupdate:e=>e instanceof CompositionEvent,compositionend:e=>e instanceof CompositionEvent},ge=["role"],he=["id","type","disabled","formatter","parser","readonly","autocomplete","tabindex","aria-label","placeholder"],we=["id","tabindex","disabled","readonly","autocomplete","aria-label","placeholder"];var Se;const $e=ie(le(g((Se=r({},{name:"ElInput",inheritAttrs:!1}),a(Se,t({props:xe,emits:be,setup(e,{expose:a,emit:t}){const o=e,n={suffix:"append",prefix:"prepend"},l=p(),s=h(),c=w(),f=i((()=>{const e={};return"combobox"===o.containerRole&&(e["aria-haspopup"]=s["aria-haspopup"],e["aria-owns"]=s["aria-owns"],e["aria-expanded"]=s["aria-expanded"]),e})),v=((e={})=>{const{excludeListeners:a=!1,excludeKeys:t}=e,o=i((()=>((null==t?void 0:t.value)||[]).concat(ce))),n=p();return i(n?()=>{var e;return u(Object.entries(null==(e=n.proxy)?void 0:e.$attrs).filter((([e])=>!(o.value.includes(e)||a&&fe.test(e)))))}:()=>({}))})({excludeKeys:i((()=>Object.keys(f.value)))}),{form:y,formItem:m}=S(),{inputId:x}=$(o,{formItemContext:m}),b=k(),g=z(),le=I("input"),ie=I("textarea"),ue=C(),pe=C(),de=d(!1),ve=d(!1),ye=d(!1),xe=d(!1),be=d(),Se=C(o.inputStyle),$e=i((()=>ue.value||pe.value)),ke=i((()=>{var e;return null!=(e=null==y?void 0:y.statusIcon)&&e})),ze=i((()=>(null==m?void 0:m.validateState)||"")),Ie=i((()=>E[ze.value])),Ce=i((()=>xe.value?P:O)),Ee=i((()=>[s.style,o.inputStyle])),Pe=i((()=>[o.inputStyle,Se.value,{resize:o.resize}])),Oe=i((()=>V(o.modelValue)?"":String(o.modelValue))),Ve=i((()=>o.clearable&&!g.value&&!o.readonly&&!!Oe.value&&(de.value||ve.value))),Fe=i((()=>o.showPassword&&!g.value&&!o.readonly&&!!Oe.value&&(!!Oe.value||de.value))),je=i((()=>o.showWordLimit&&!!v.value.maxlength&&("text"===o.type||"textarea"===o.type)&&!g.value&&!o.readonly&&!o.showPassword)),Ae=i((()=>Array.from(Oe.value).length)),Be=i((()=>!!je.value&&Ae.value>Number(v.value.maxlength))),Me=i((()=>!!c.suffix||!!o.suffixIcon||Ve.value||o.showPassword||je.value||!!ze.value&&ke.value)),[Ne,_e]=function(e){const a=d();return[function(){if(null==e.value)return;const{selectionStart:t,selectionEnd:o,value:n}=e.value;if(null==t||null==o)return;const l=n.slice(0,Math.max(0,t)),s=n.slice(Math.max(0,o));a.value={selectionStart:t,selectionEnd:o,value:n,beforeTxt:l,afterTxt:s}},function(){if(null==e.value||null==a.value)return;const{value:t}=e.value,{beforeTxt:o,afterTxt:n,selectionStart:l}=a.value;if(null==o||null==n||null==l)return;let s=t.length;if(t.endsWith(n))s=t.length-n.length;else if(t.startsWith(o))s=o.length;else{const e=o[l-1],a=t.indexOf(e,l-1);-1!==a&&(s=a+1)}e.value.setSelectionRange(s,s)}]}(ue);F(pe,(e=>{if(!je.value||"both"!==o.resize)return;const a=e[0],{width:t}=a.contentRect;be.value={right:`calc(100% - ${t+15+6}px)`}}));const Re=()=>{const{type:e,autosize:a}=o;if(se&&"textarea"===e)if(a){const e=re(a)?a.minRows:void 0,t=re(a)?a.maxRows:void 0;Se.value=r({},me(pe.value,e,t))}else Se.value={minHeight:me(pe.value).minHeight}},He=()=>{const e=$e.value;e&&e.value!==Oe.value&&(e.value=Oe.value)},We=e=>{const{el:a}=l.vnode;if(!a)return;const t=Array.from(a.querySelectorAll(`.${le.e(e)}`)).find((e=>e.parentNode===a));if(!t)return;const o=n[e];c[o]?t.style.transform=`translateX(${"suffix"===e?"-":""}${a.querySelector(`.${le.be("group",o)}`).offsetWidth}px)`:t.removeAttribute("style")},Ke=()=>{We("prefix"),We("suffix")},Te=async e=>{Ne();let{value:a}=e.target;o.formatter&&(a=o.parser?o.parser(a):a,a=o.formatter(a)),ye.value||a!==Oe.value&&(t("update:modelValue",a),t("input",a),await A(),He(),_e())},qe=e=>{t("change",e.target.value)},De=e=>{t("compositionstart",e),ye.value=!0},Le=e=>{var a;t("compositionupdate",e);const o=null==(a=e.target)?void 0:a.value,n=o[o.length-1]||"";ye.value=!(e=>/([(\uAC00-\uD7AF)|(\u3130-\u318F)])+/gi.test(e))(n)},Ge=e=>{t("compositionend",e),ye.value&&(ye.value=!1,Te(e))},Ue=()=>{xe.value=!xe.value,Xe()},Xe=async()=>{var e;await A(),null==(e=$e.value)||e.focus()},Ze=e=>{de.value=!0,t("focus",e)},Je=e=>{var a;de.value=!1,t("blur",e),o.validateEvent&&(null==(a=null==m?void 0:m.validate)||a.call(m,"blur").catch((e=>B())))},Ye=e=>{ve.value=!1,t("mouseleave",e)},Qe=e=>{ve.value=!0,t("mouseenter",e)},ea=e=>{t("keydown",e)},aa=()=>{t("update:modelValue",""),t("change",""),t("clear"),t("input","")};return j((()=>o.modelValue),(()=>{var e;A((()=>Re())),o.validateEvent&&(null==(e=null==m?void 0:m.validate)||e.call(m,"change").catch((e=>B())))})),j(Oe,(()=>He())),j((()=>o.type),(async()=>{await A(),He(),Re(),Ke()})),M((async()=>{!o.formatter&&o.parser,He(),Ke(),await A(),Re()})),N((async()=>{await A(),Ke()})),a({input:ue,textarea:pe,ref:$e,textareaStyle:Pe,autosize:_(o,"autosize"),focus:Xe,blur:()=>{var e;return null==(e=$e.value)?void 0:e.blur()},select:()=>{var e;null==(e=$e.value)||e.select()},clear:aa,resizeTextarea:Re}),(e,a)=>R((W(),K("div",Q(L(f),{class:["textarea"===e.type?L(ie).b():L(le).b(),L(le).m(L(b)),L(le).is("disabled",L(g)),L(le).is("exceed",L(Be)),{[L(le).b("group")]:e.$slots.prepend||e.$slots.append,[L(le).bm("group","append")]:e.$slots.append,[L(le).bm("group","prepend")]:e.$slots.prepend,[L(le).m("prefix")]:e.$slots.prefix||e.prefixIcon,[L(le).m("suffix")]:e.$slots.suffix||e.suffixIcon||e.clearable||e.showPassword,[L(le).bm("suffix","password-clear")]:L(Ve)&&L(Fe)},e.$attrs.class],style:L(Ee),role:e.containerRole,onMouseenter:Qe,onMouseleave:Ye}),[T(" input "),"textarea"!==e.type?(W(),K(q,{key:0},[T(" prepend slot "),e.$slots.prepend?(W(),K("div",{key:0,class:D(L(le).be("group","prepend"))},[G(e.$slots,"prepend")],2)):T("v-if",!0),U("div",{class:D([L(le).e("wrapper"),L(le).is("focus",de.value)])},[T(" prefix slot "),e.$slots.prefix||e.prefixIcon?(W(),K("span",{key:0,class:D(L(le).e("prefix"))},[U("span",{class:D(L(le).e("prefix-inner"))},[G(e.$slots,"prefix"),e.prefixIcon?(W(),X(L(Y),{key:0,class:D(L(le).e("icon"))},{default:Z((()=>[(W(),X(J(e.prefixIcon)))])),_:1},8,["class"])):T("v-if",!0)],2)],2)):T("v-if",!0),U("input",Q({id:L(x),ref_key:"input",ref:ue,class:L(le).e("inner")},L(v),{type:e.showPassword?xe.value?"text":"password":e.type,disabled:L(g),formatter:e.formatter,parser:e.parser,readonly:e.readonly,autocomplete:e.autocomplete,tabindex:e.tabindex,"aria-label":e.label,placeholder:e.placeholder,style:e.inputStyle,onCompositionstart:De,onCompositionupdate:Le,onCompositionend:Ge,onInput:Te,onFocus:Ze,onBlur:Je,onChange:qe,onKeydown:ea}),null,16,he),T(" suffix slot "),L(Me)?(W(),K("span",{key:1,class:D(L(le).e("suffix"))},[U("span",{class:D(L(le).e("suffix-inner"))},[L(Ve)&&L(Fe)&&L(je)?T("v-if",!0):(W(),K(q,{key:0},[G(e.$slots,"suffix"),e.suffixIcon?(W(),X(L(Y),{key:0,class:D(L(le).e("icon"))},{default:Z((()=>[(W(),X(J(e.suffixIcon)))])),_:1},8,["class"])):T("v-if",!0)],64)),L(Ve)?(W(),X(L(Y),{key:1,class:D([L(le).e("icon"),L(le).e("clear")]),onMousedown:a[0]||(a[0]=te((()=>{}),["prevent"])),onClick:aa},{default:Z((()=>[ee(L(ae))])),_:1},8,["class"])):T("v-if",!0),L(Fe)?(W(),X(L(Y),{key:2,class:D([L(le).e("icon"),L(le).e("password")]),onClick:Ue},{default:Z((()=>[(W(),X(J(L(Ce))))])),_:1},8,["class"])):T("v-if",!0),L(je)?(W(),K("span",{key:3,class:D(L(le).e("count"))},[U("span",{class:D(L(le).e("count-inner"))},oe(L(Ae))+" / "+oe(L(v).maxlength),3)],2)):T("v-if",!0),L(ze)&&L(Ie)&&L(ke)?(W(),X(L(Y),{key:4,class:D([L(le).e("icon"),L(le).e("validateIcon"),L(le).is("loading","validating"===L(ze))])},{default:Z((()=>[(W(),X(J(L(Ie))))])),_:1},8,["class"])):T("v-if",!0)],2)],2)):T("v-if",!0)],2),T(" append slot "),e.$slots.append?(W(),K("div",{key:1,class:D(L(le).be("group","append"))},[G(e.$slots,"append")],2)):T("v-if",!0)],64)):(W(),K(q,{key:1},[T(" textarea "),U("textarea",Q({id:L(x),ref_key:"textarea",ref:pe,class:L(ie).e("inner")},L(v),{tabindex:e.tabindex,disabled:L(g),readonly:e.readonly,autocomplete:e.autocomplete,style:L(Pe),"aria-label":e.label,placeholder:e.placeholder,onCompositionstart:De,onCompositionupdate:Le,onCompositionend:Ge,onInput:Te,onFocus:Ze,onBlur:Je,onChange:qe,onKeydown:ea}),null,16,we),L(je)?(W(),K("span",{key:0,style:ne(be.value),class:D(L(le).e("count"))},oe(L(Ae))+" / "+oe(L(v).maxlength),7)):T("v-if",!0)],64))],16,ge)),[[H,"hidden"!==e.type]])}})))),[["__file","/home/runner/work/element-plus/element-plus/packages/components/input/src/input.vue"]]));export{pe as C,$e as E,de as I,ue as U};
